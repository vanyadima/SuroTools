# SuroTools
> ‚öôÔ∏è –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç–∞–¥–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.
> –í –Ω–∞—á–∞–ª–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –±—É–¥—É—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã.

> –ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ Linux.  
> –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–µ—à–µ–Ω–∏–π –¥–ª—è Linux.

---

<details>
<summary>üêß ALT Linux</summary>

<details>
<summary>üõ†Ô∏èüêßJEOS</summary>
    
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ–≥–æ —à–µ–¥–µ–≤—Ä–∞ –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–π—Ç–∏-–ø—Ä–æ–º–∞ –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã - –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–∞–∂–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ —ç—Ç–æ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π, –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–π –º–µ—á—Ç–æ–π, —Ñ–∏—á–µ–π —É—Ä–æ–≤–Ω—è ¬´Enterprise Deluxe Edition¬ª :)))))

```bash
apt-get update
apt-get install bash-completion etcnet-full iptables nano 
```
    
</details>
    
<details>
<summary>üîÄ–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</summary>

<details>
<summary>ip_forward</summary>

net.ipv4.ip_forward –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä - –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.

```bash
vim /etc/net/sysctl.conf
net.ipv4.ip_forward=1 #–ú–µ–Ω—è–µ–º 0 –Ω–∞ 1
vim /etc/sysctl.conf
net.ipv4.ip_forward=1
```

–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ sysctl

```bash
sysctl -p
```

</details>
    
<details>
<summary>iptables</summary>

iptables ‚Äî —ç—Ç–æ —Ñ–∞–µ—Ä–≤–æ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ç–µ–≤—ã–º —Ç—Ä–∞—Ñ–∏–∫–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª, —Ä–µ—à–∞—è, —á—Ç–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –∞ —á—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å.

–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã iptables:

```bash
# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–∞–≤–∏–ª
iptables -F
iptables -t nat -F
```

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
iptables-save >> /etc/sysconfig/iptables
systemctl enable iptables
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞:

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞](Image/ALTLinux/iptables%20sw.png)

```bash
iptables -t nat -A POSTROUTING -o <–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤—ã—Ö–æ–¥–æ–º –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -j MASQUERADE
iptables -A	FORWARD	-i <–∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -o <–≤–Ω—É—Ç. –∏–Ω—Ç> -j ACCEPT
iptables -A	FORWARD	-i <–≤–Ω—É—Ç. –∏–Ω—Ç> -o <–∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -n state --state ESTABLISHED,RELATED -j ACCEPT
```

>iptables -t nat -A POSTROUTING -o <–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤—ã—Ö–æ–¥–æ–º –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -j MASQUERADE - –ü—Ä—è—á–µ—Ç –≤—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –∑–∞ —Å–≤–æ–∏–º –≤–Ω–µ—à–Ω–∏–º IP (–ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥).
>
>iptables -A	FORWARD	-i <–∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -o <–≤–Ω—É—Ç. –∏–Ω—Ç> -j ACCEPT - –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º —Ö–æ–¥–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
>
>iptables -A	FORWARD	-i <–≤–Ω—É—Ç. –∏–Ω—Ç> -o <–∏–Ω—Ç–µ—Ä–Ω–µ—Ç> -n state --state ESTABLISHED,RELATED -j ACCEPT - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ —Ç–æ–ª—å–∫–æ "–æ—Ç–≤–µ—Ç—ã" –Ω–∞ –∏—Ö –∑–∞–ø—Ä–æ—Å—ã, –ø–æ–≤—ã—à–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ iptables –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DHCP

```bash
iptables -A INPUT -i <–∏–Ω—Ç> -p udp -j ACCEPT
iptables -A INPUT -i <–∏–Ω—Ç> -p tcp -j ACCEPT
iptables -A OUTPUT -i <–∏–Ω—Ç> -p udp -j ACCEPT
iptables -A OUTPUT -i <–∏–Ω—Ç> -p tcp -j ACCEPT
```

</details>

<details>
<summary>DHCP</summary>

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ DHCP-—Å–µ—Ä–≤–µ—Ä–∞

```bash
apt-get install dhcp-server
```
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ /etc/dhcp/dhcpd.conf

```bash
default-lease-time 3600;
max-lease-time 86400;
authoritative;

subnet 10.21.211.0 netmask 255.255.255.0 {
    range 10.21.211.10 10.21.211.230;
    option routers 10.21.211.1;
    option subnet-mask 255.255.255.0;
    option broadcast-address 10.21.211.255;
}
```

> default-lease-time 3600; - –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (1 —á–∞—Å)
>
> max-lease-time 86400; - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã (24 —á–∞—Å–∞)
>
> authoritative; - —Å–µ—Ä–≤–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –¥–ª—è –¥–∞–Ω–Ω–æ–π —Å–µ—Ç–∏
>
> subnet 10.21.211.0 netmask 255.255.255.0 - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏
>
> range 10.21.211.10 10.21.211.230; - –¥–∏–∞–ø–∞–∑–æ–Ω –≤—ã–¥–∞–≤–∞–µ–º—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤
>
> option routers 10.21.211.1; - —à–ª—é–∑ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
>
> option subnet-mask 255.255.255.0; - –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏
>
> option broadcast-address 10.21.211.255; - —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å

–°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ /etc/default/isc-dhcp-server

```bash
DHCP_CONF=/etc/dhcp/dhcpd.conf
DHCP_PID=/var/run/dhcpd.pid
DHCP_OPTS="-4"
INTERFACEv4="<ens34>"
INTERFACEv6=""
```

> DHCP_CONF=/etc/dhcp/dhcpd.conf - –ø—É—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É
>
> DHCP_PID=/var/run/dhcpd.pid - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É PID-–ø—Ä–æ—Ü–µ—Å—Å–∞
>
> DHCP_OPTS="-4" - –æ–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞ (—Ä–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ —Å IPv4)
>
> INTERFACEv4="ens34" - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è IPv4
>
> INTERFACEv6="" - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è IPv6 (–ø—É—Å—Ç–æ - –æ—Ç–∫–ª—é—á–µ–Ω–æ)

–ó–∞–ø—É—Å–∫–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ dhcpd

```bash
systemctl start dhcpd && systemctl enable dhcpd
```

</details>
  
<details>
<summary>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</summary>

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

‚ùó –ò–Ω—Ç–µ—Ä—Ñ–µ—Å—ã –≤ –≤–∏—Ä–∞—Ç—É–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ –æ–¥–Ω–æ–º—É! 

```bash
mkdir /etc/net/ifaces/ens34/
cp /etc/net/ifaces/ens33/options /etc/net/ifaces/ens34/
```
–ï—Å–ª–∏ –ø–∞–ø–∫–∞ ifaces –ø—É—Å—Ç–∞—è, —Ç–æ –±–µ—Ä–µ–º –∫–æ–Ω—Ñ–∏–≥ options –æ—Ç—Å—é–¥–∞

```bash
BOOTPROTO=static
TYPE=eth
NM_CONTROLLED=no
DISABLED=no
CONFIG_WIRELESS=no
SYSTEMD_BOOTPROTO=dhcp4
CONFIG_IPV4=yes
SYSTEMD_CONTROLLED=no
ONBOOT=yes
CONFIG_IPV6=no
```
–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ipv4address –ø–∏—à–∏—Ç–µ ip ‚ùó‚ùó‚ùó *—Å –º–∞—Å–∫–æ–π!!!* ‚ùó‚ùó‚ùó

–ü–æ–¥–Ω–∏–º–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
ifup ens34
```
–ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º network

```bash
systemctl restart network
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–ª—é–∑–∞

```bash
vim /etc/net/ifaces/ens34/ipv4route
```

```bash
default via <ip —Ä–æ—É—Ç–µ—Ä–∞>
```

</details>

<details>
<summary>VLAN</summary>

–°–æ–∑–¥–∞—ë–º –∫–∞—Ç–∞–ª–æ–≥ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö

```bash
mkdir /etc/net/ifaces/ens33.XX # –≥–¥–µ XX - –Ω–æ–º–µ—Ä vlan
```

–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª—ã ipv4address –∏ options

```bash
touch /etc/net/ifaces/ens33.XX/ipv4address
touch /etc/net/ifaces/ens33.XX/options
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è options

```bash
TYPE=vlan
HOST=ens33
VID=XX
DISABLED=no
BOOTPROTO=static
```

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ipv4address –ø–∏—à–∏—Ç–µ ip ‚ùó‚ùó‚ùó *—Å –º–∞—Å–∫–æ–π!!!* ‚ùó‚ùó‚ùó

</details>

</details>

<details>
<summary>üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ü–û</summary>
    
<details>
<summary>–î—Ä–∞–π–≤–µ—Ä–∞ VMware</summary>

‚ÄºÔ∏è –ë–µ–∑ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ VMware –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –º–µ–∂–¥—É –≤–∞—à–∏–º –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π!
    
```bash
apt-get install open-vm-tools open-vm-tools-desktop xrandr
systemctl enable vmtoolsd
systemctl start vmtoolsd
```
> open-vm-tools ‚Äî –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–±—â–∞—è –ø–∞–ø–∫–∞, –≤—Ä–µ–º—è, –ø—Ä.)
>
> open-vm-tools-desktop ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞, –º—ã—à—å, –≥—Ä–∞—Ñ–∏–∫–∞
>
> xrandr ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º (–Ω–∞ —Å–ª—É—á–∞–π —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
    
</details>

<details>
<summary>rsyslog</summary>

rsyslog ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–±–∏—Ä–∞–µ—Ç, —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ (–∂—É—Ä–Ω–∞–ª—ã —Å–æ–±—ã—Ç–∏–π) –≤ –Ω—É–∂–Ω—ã–µ –º–µ—Å—Ç–∞.

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
apt-get install rsyslog logrotate
```

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –≤ /etc/rsyslog.conf

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ](Image/ALTLinux/rsyslogsrv.png)

```bash
#include(file="/etc/rsyslog.d/*.conf" mode="options1") 

module(load="imuxsock")
module(load="imklog")
module(load="imudp")
input(type="imudp" port="514")
module(load="imtcp")
input(type="imtcp" port="514")

$template 404, "/opt/%HOSTNAME%/%PROGRAMNAME%.log"

if ($fromhost-ip != "127.0.0.1" and $syslogseverity <= 4) then ?404
& stop 
```

>#include(file="/etc/rsyslog.d/*.conf" mode="optional")  - –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
>
>module(load="imuxsock") - –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è –¥–ª—è Unix-—Å–æ–∫–µ—Ç–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
>
>module(load="imklog") - –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è –¥–ª—è –ª–æ–≥–æ–≤ —è–¥—Ä–∞
>
>module(load="imudp") - –ó–∞–≥—Ä—É–∑–∫–∞ UDP-–º–æ–¥—É–ª—è
>
>input(type="imudp" port="514") - –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ syslog-—Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ UDP –Ω–∞ –ø–æ—Ä—Ç—É 514
>
>module(load="imtcp") - –ó–∞–≥—Ä—É–∑–∫–∞ TCP-–º–æ–¥—É–ª—è
>
>input(type="imtcp" port="514") - –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ syslog-—Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ TCP –Ω–∞ –ø–æ—Ä—Ç—É 514
>
>$template 404, "/opt/%HOSTNAME%/%PROGRAMNAME%.log" - –®–∞–±–ª–æ–Ω –¥–ª—è –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
>
>if ($fromhost-ip != "127.0.0.1" and $syslogseverity <= 4) then ?404 - –ü—Ä–∞–≤–∏–ª–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: –µ—Å–ª–∏ IP –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –Ω–µ 127.0.0.1 –∏ —É—Ä–æ–≤–µ–Ω—å —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ <= 4 (warning)
>
>& stop - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

P.S. 404 ‚Äî —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∏–º—è —à–∞–±–ª–æ–Ω–∞, –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.

–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –¥–ª—è —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –º–∞—à–∏–Ω

```bash
mkdir -p /opt/cli1
mkdir -p /opt/cli2
mkdir -p /opt/cli3
```
logrotate ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥-—Ñ–∞–π–ª–∞–º–∏: –∏—Ö —Ä–æ—Ç–∞—Ü–∏–∏, —Å–∂–∞—Ç–∏—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ logrotate –≤ /etc/logrotate.d/rsyslog-opt

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ logrotate](Image/ALTLinux/logrotate.png)

```bash
/opt/*/*.log {
    weekly
    size 10M
    rotate 4
    compress
    missingok
    notifempty
    create 0640 root root
    sharedscripts
    postrotate
        systemctl reload rsyslog > /dev/null 2>&1 || true
    endscript
}
```
>/opt/*/*.log {                    - –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∫–æ –≤—Å–µ–º .log —Ñ–∞–π–ª–∞–º –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö /opt/
>
>weekly                        - –†–æ—Ç–∞—Ü–∏—è —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
>
>size 10M                      - –ò–ª–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ 10 –ú–ë
>
>rotate 4                      - –•—Ä–∞–Ω–∏—Ç—å 4 –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∫–æ–ø–∏–∏ –ª–æ–≥–æ–≤
>
>compress                      - –°–∂–∏–º–∞—Ç—å –∞—Ä—Ö–∏–≤–Ω—ã–µ –∫–æ–ø–∏–∏ gzip
>
>missingok                     - –ù–µ —Å—á–∏—Ç–∞—Ç—å –æ—à–∏–±–∫–æ–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
>
>notifempty                    - –ù–µ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã
>
>create 0640 root root         - –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª –ª–æ–≥–∞ —Å –ø—Ä–∞–≤–∞–º–∏ 640, –≤–ª–∞–¥–µ–ª–µ—Ü root:root
>
>sharedscripts                 - –í—ã–ø–æ–ª–Ω—è—Ç—å —Å–∫—Ä–∏–ø—Ç—ã —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–π –≥—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤
>
>postrotate                    - –ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ –∫–æ–º–∞–Ω–¥ –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏
>
>systemctl reload rsyslog > /dev/null 2>&1 || true  - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ rsyslog, –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞
>
>endscript                     - –ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –∫–æ–º–∞–Ω–¥
}

–í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
systemctl enable --now rsyslog logrotate
```

---

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –≤ /etc/rsyslog.conf

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ](Image/ALTLinux/rsyslogcli.png)

```bash
*.warning action(type="omfwd"
    target="10.21.12.50"
    port="514"
    protocol="tcp"
    action.resumeRetryCount="-1"
    queue.type="linkedList"
    queue.size="10000")
```

>*.warning action(type="omfwd"    - –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É—Ä–æ–≤–Ω–µ–º warning –∏ –≤—ã—à–µ
>
>target="10.21.12.50"         - –ê–¥—Ä–µ—Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ syslog-—Å–µ—Ä–≤–µ—Ä–∞
>
>port="514"                   - –ü–æ—Ä—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
>
>protocol="tcp"               - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
>
>action.resumeRetryCount="-1" - –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –æ–±—Ä—ã–≤–µ
>
>queue.type="linkedList"      - –¢–∏–ø –æ—á–µ—Ä–µ–¥–∏ - —Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫
>
>queue.size="10000")          - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ - 10000 —Å–æ–æ–±—â–µ–Ω–∏–π

–í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
systemctl enable --now rsyslog
```

</details>
    
</details>

</details>

---

<details>
<summary>üßä Arch Linux</summary>

<details>
<summary>üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –û–°</summary>

<details>
<summary>–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π</summary>
    
–í–æ—Ç –∏ –Ω–∞—Å—Ç–∞–ª —Ç–æ—Ç —Å–∞–º—ã–π –¥–µ–Ω—å. –î–µ–Ω—å, –∫–æ–≥–¥–∞ –≤—ã —Ä–µ—à–∏–ª–∏, —á—Ç–æ –∂–∏—Ç—å —Å–ø–æ–∫–æ–π–Ω–æ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ –≤–∞—Å, –∏ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ —Ü–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Arch Linux –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. 

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! :)

–í—ã —É–∂–µ —Å–∫–∞—á–∞–ª–∏ –æ–±—Ä–∞–∑, –∑–∞–ø–∏—Å–∞–ª–∏ –µ–≥–æ –Ω–∞ —Ñ–ª–µ—à–∫—É, –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å, –∏ –ø–µ—Ä–µ–¥ –≤–∞–º–∏ –≥–æ—Ä–¥–æ –º–∏–≥–∞–µ—Ç –∫—É—Ä—Å–æ—Ä –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –ú–æ–º–µ–Ω—Ç –∏—Å—Ç–∏–Ω—ã –Ω–∞—Å—Ç–∞–ª.

–ù–æ‚Ä¶ —á—Ç–æ –¥–∞–ª—å—à–µ? 
–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç.

```bash
ping archlinux.org
```

–ï—Å–ª–∏ –≤—ã –Ω–∞ Wi-Fi, —Ç–æ –ø–æ—Ä–∞ –ø—Ä–∏—Ä—É—á–∏—Ç—å –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—É—é —Å–µ—Ç—å. –î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ (–Ω—É, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ):

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–ª–æ–∫ Wi-Fi

```bash
rfkill
```

–ï—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - –≤—ã–ø–æ–ª—è–Ω–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
rfkill unblock wifi
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi

```bash
iwctl
device list
station wlan0 scan
station wlan0 get-networks
station wlan0 connect <SSID>
```

–ò–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ:

```bash
wifi-menu
```

</details>
    
<details>
<summary>1. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–æ–≤</summary>
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∏—Å–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ <code>lsblk</code>
    
```bash
lsblk
```
–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å: GPT –∏–ª–∏ MBR. –ï—Å–ª–∏ —É —Ç–µ–±—è –ü–ö —Å UEFI - —Å—Ç–∞–≤–ª—å GPT. 

–ê –µ—Å–ª–∏ —Å—Ç–æ–∏—Ç BIOS, - MBR

<details>
<summary>MBR</summary>

–†–∞–∑–º–µ—Ç–∫–∞ —Ä–∞–∑–¥–µ–ª–∞

| –†–∞–∑–¥–µ–ª | –ù–∞–∑–≤–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç | –†–∞–∑–º–µ—Ä   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ          |
|---------|-----------|---------|----------|----------------------|
| sdX1    | bios      | BIOS    | 1 MB    | –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π BIOS     |
| sdX2    | boot      | EXT4    | 1 GB    | –Ø–¥—Ä–∞ Linux           |
| sdX3    | swap      | SWAP    | 8 GB    | –†–∞–∑–¥–µ–ª –ø–æ–¥–∫–∞—á–∫–∏      |
| sdX4    | root      | EXT4   | –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ | –°–∏—Å—Ç–µ–º–∞, –¥–∞–Ω–Ω—ã–µ      |


</details>

<details>
<summary>GPT</summary>

–†–∞–∑–º–µ—Ç–∫–∞ —Ä–∞–∑–¥–µ–ª–∞

| –†–∞–∑–¥–µ–ª | –ù–∞–∑–≤–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç | –†–∞–∑–º–µ—Ä   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ          |
|---------|-----------|---------|----------|----------------------|
| sdX1    | efi      | FAT32    | 300 MB    | –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π BIOS     |
| sdX2    | boot      | EXT4    | 1 GB    | –Ø–¥—Ä–∞ Linux           |
| sdX3    | swap      | SWAP    | 8 GB    | –†–∞–∑–¥–µ–ª –ø–æ–¥–∫–∞—á–∫–∏      |
| sdX4    | root      | EXT4   | –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ | –°–∏—Å—Ç–µ–º–∞, –¥–∞–Ω–Ω—ã–µ      |

</details>

</details>

<details>
<summary>2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —è–¥—Ä–∞ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</summary>
–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

<details>
<summary>3. GRUB</summary>



</details>

<details>
<summary>4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∏</summary>
–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

<details>
<summary>–†–µ–∫–æ–º–µ–Ω–¥—É—é –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ</summary>
–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

<details>
<summary>–ü—É—Ç—å —Å–∞–º—É—Ä–∞—è (–¥–ª—è –ª–µ–Ω–∏–≤—ã—Ö)</summary>
–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

</details>

</details>

---

<details>
<summary>üîÑ CentOS</summary>

–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

---

<details>
<summary>üåø EcoRouter</summary>

–ü–æ–∫–∞ –ø—É—Å—Ç–æ :(

</details>

---
## üíæ –û–±—Ä–∞–∑—ã –û–°

JEOS ALT Linux - [–°–∫–∞—á–∞—Ç—å](https://nightly.altlinux.org/sisyphus/tested/regular-jeos-systemd-latest-x86_64.iso)

---
## üìÇ–ü–æ–ª–µ–∑–Ω—ã–µ —à—Ç—É—á–∫–∏
<details>
<summary>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞—Ç–∏–∫–∏</summary>

<details>
<summary>ALT Linux</summary>



</details>

</details>

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

> –ê–≤—Ç–æ—Ä: **vanyadima**  
> –ö–æ–Ω—Ç–∞–∫—Ç: **isurodin@yandex.ru** **[VK](https://vk.com/surodyn)** **[Telegram](https://t.me/vanyadlma)**

## üí¨ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–û—Å–æ–±–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å **[Gerasti](https://github.com/Gerasti)** ‚Äî  
–∑–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –ø–æ–¥—Ö–æ–¥ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å–ª—É–∂–∏–ª–∏ –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è SuroTools.
